\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{recipe}[2020/02/09 Recipe package]

\RequirePackage[utf8]{inputenc}
\RequirePackage{multicol}
\RequirePackage{enumitem}
\RequirePackage{calc}

\newenvironment{recipe}[1]
{
	\newenvironment{ingredients}[1][1]
	{
		\newenvironment{ingredientgroup}[2][A pinch]
		{
			\newcommand{\ingredient}[1]{\item[\textbf{########1}]}
			\newcommand{\ing}{\ingredient}
			\noindent\rule{\columnwidth}{0.4pt}
			{\Large ####2}
			\begin{enumerate}[itemsep=0cm,labelindent=0pt,labelwidth=\widthof{####1}+1em,label=\arabic*.,itemindent=1em,leftmargin=!]
		}
		{
			\end{enumerate}
		}
		\def\num@Cols{##1}
		{\huge Ingredients}
		\if##11
			\\
		\else
			\vspace{-0.4cm}
			\begin{multicols}{##1}
		\fi
	}
	{
		\if\num@Cols1
		\else
			\end{multicols}
		\fi
	}
	\newenvironment{procedure}[1][1]
	{
		\newenvironment{proceduregroup}[1]
		{
			\newcommand{\step}{\item}
			\noindent\rule{\columnwidth}{0.3pt}
			{\Large ####1}
			\begin{enumerate}[itemsep=0cm]
		}
		{
			\end{enumerate}
		}
		\def\num@Cols{##1}
		{\huge Procedure}
		\if##11
			\\
		\else
			\vspace{-0.4cm}
			\begin{multicols}{##1}
		\fi
	}
	{
		\if\num@Cols1
		\else
			\end{multicols}
		\fi
	}
	\begin{center}
		\Huge
		\textbf{#1}
	\end{center}
	\vspace{0.5cm}
}
{}